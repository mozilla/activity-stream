From 5877ac74b2bf6a9d3a7b9b482250dbff79715fbf Mon Sep 17 00:00:00 2001
From: Ricky Rosario <rickyrosario@gmail.com>
Date: Tue, 5 Mar 2019 14:41:11 -0500
Subject: [PATCH] Bug 1529340 - CFR Pinned tabs popup animation

MozReview-Commit-ID: FTr5Pi7ySbY
---
 browser/base/content/popup-notifications.inc | 18 ++++---
 browser/themes/shared/browser.inc.css        | 56 +++++++++++++++++++-
 2 files changed, 65 insertions(+), 9 deletions(-)

diff --git a/browser/base/content/popup-notifications.inc b/browser/base/content/popup-notifications.inc
index 880203a83a64b..b29dafb451e56 100644
--- a/browser/base/content/popup-notifications.inc
+++ b/browser/base/content/popup-notifications.inc
@@ -96,14 +96,16 @@
         <description id="cfr-notification-author"></description>
       </popupnotificationcontent>
       <popupnotificationfooter id="cfr-notification-footer" orient="vertical">
-        <description id="cfr-notification-footer-text"/>
-        <hbox id="cfr-notification-footer-addon-info">
-          <hbox id="cfr-notification-footer-filled-stars"/>
-          <hbox id="cfr-notification-footer-empty-stars"/>
-          <label id="cfr-notification-footer-users"/>
-          <spacer id="cfr-notification-footer-spacer" hidden="true"/>
-          <label id="cfr-notification-footer-learn-more-link" is="text-link"/>
-        </hbox>
+        <vbox id="cfr-notification-footer-text-and-addon-info">
+          <description id="cfr-notification-footer-text"/>
+          <hbox id="cfr-notification-footer-addon-info">
+            <hbox id="cfr-notification-footer-filled-stars"/>
+            <hbox id="cfr-notification-footer-empty-stars"/>
+            <label id="cfr-notification-footer-users"/>
+            <spacer id="cfr-notification-footer-spacer" hidden="true"/>
+            <label id="cfr-notification-footer-learn-more-link" is="text-link"/>
+          </hbox>
+        </vbox>
       </popupnotificationfooter>
     </popupnotification>
 
diff --git a/browser/themes/shared/browser.inc.css b/browser/themes/shared/browser.inc.css
index 8ad166e70b730..875a1900e59b8 100644
--- a/browser/themes/shared/browser.inc.css
+++ b/browser/themes/shared/browser.inc.css
@@ -232,7 +232,7 @@
   margin-bottom: 0;
 }
 
-#cfr-notification-footer {
+#cfr-notification-footer-text-and-addon-info {
   padding: 10px var(--arrowpanel-padding);
 }
 
@@ -282,6 +282,60 @@
   flex-grow: 1;
 }
 
+#cfr-notification-footer-pintab-animation-container {
+  background-image: url("resource://activity-stream/data/content/assets/cfr_pinnedtab_animated.png");
+  background-position: top center;
+  background-repeat: no-repeat;
+  height: 173px;
+  width: 343px;
+}
+
+#contextual-feature-recommendation-notification[data-notification-category="cfrAddons"] #cfr-notification-footer-pintab-animation-container {
+  display: none;
+}
+
+#cfr-notification-footer-pintab-animation-container:not([animate]),
+#cfr-notification-footer-pintab-animation-container[paused],
+:root[lwt-popup-brighttext] #cfr-notification-footer-pintab-animation-container:not([animate]),
+:root[lwt-popup-brighttext] #cfr-notification-footer-pintab-animation-container[paused] {
+  background-image: url("resource://activity-stream/data/content/assets/cfr_pinnedtab_static.png");
+}
+
+:root[lwt-popup-brighttext] #cfr-notification-footer-pintab-animation-container {
+  background-image: url("resource://activity-stream/data/content/assets/cfr_pinnedtab_animated_darktheme.png");
+}
+
+#cfr-notification-footer-animation-controls {
+  background: linear-gradient(transparent 0%, rgba(255, 255, 255, 0.95) 35%);
+  padding: 20px var(--arrowpanel-padding) 10px;
+}
+
+:root[lwt-popup-brighttext] #cfr-notification-footer-animation-controls {
+  margin-left: 13px;
+}
+
+#cfr-notification-footer-pintab-animation-container:not([animate]) #cfr-notification-footer-animation-controls,
+#cfr-notification-footer-pintab-animation-container[paused] #cfr-notification-footer-animation-controls {
+  visibility: hidden;
+}
+
+#cfr-notification-footer-pause-button,
+#cfr-notification-footer-pause-label {
+  color: rgba(12, 12, 13, 0.8);
+  cursor: pointer;
+}
+
+#cfr-notification-footer-pause-icon {
+  background-image: url("resource://activity-stream/data/content/assets/glyph-pause-12.svg");
+  background-position: center center;
+  background-repeat: no-repeat;
+  background-size: 12px;
+  -moz-context-properties: fill;
+  fill: rgba(12, 12, 13, 0.8);
+  height: 12px;
+  width: 12px;
+}
+
 #content-mask {
   background: rgba(0, 0, 0, 0.5);
 }
-- 
2.20.1

